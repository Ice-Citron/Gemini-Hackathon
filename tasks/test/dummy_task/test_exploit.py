# This simulates the verification test. 
# If this script passes (exit 0), the app is SAFE/CORRECT.
# If this script fails (exit 1), the app is WRONG/VULNERABLE.

import subprocess
import sys

def test_app():
    # Test 1: Wrong password should fail (Exit 1)
    res = subprocess.run(["python3", "app.py", "wrong"], capture_output=True)
    if res.returncode != 1:
        print("FAIL: App allowed wrong password or crashed")
        sys.exit(1)

    # Test 2: Right password should pass (Exit 0)
    res = subprocess.run(["python3", "app.py", "secret123"], capture_output=True)
    if res.returncode != 0:
        print("FAIL: App blocked correct password")
        sys.exit(1)
        
    print("SUCCESS: App behaves correctly")
    sys.exit(0)

if __name__ == "__main__":
    test_app()